<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>KarlDJzy Official</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png" href="img/KarlDJzyBW.png" />
    <script
      type="module"
      src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"
    ></script>
  </head>
  <body>
    <div class="portofolio">
      <div class="div">
        <video autoplay muted loop playsinline id="background-video">
          <source src="0609.mov" type="video/mp4" />
        </video>
        <div class="overlap">
          <div class="overlap-group">
            <a href="#" id="home-link" class="nav-link"><div class="text-wrapper">HOME</div></a>
            <a href="#" id="rent-link" class="nav-link"><div class="text-wrapper-2">RENT</div></a>
<a href="#" id="about-link" class="nav-link"><div class="text-wrapper-3">ABOUT</div></a>
            <div class="tengah">
    <p class="karl-d-jzy" data-text="KarlDJzy">
      <span class="span">Karl</span>
      <span class="text-wrapper-4">DJzy</span>
    </p>
  </div>
</div>
            <div class="footer-service">
              <div class="react"><div class="rectangle"></div></div>
              <img class="react" src="img/react.png" />
              <div class="vscode"><div class="rectangle"></div></div>
              <img class="vscode" src="img/vscode.png" />
              <div class="fl"><div class="rectangle"></div></div>
              <img class="fl" src="img/fl.png" />
              <div class="au"><div class="rectangle"></div></div>
              <img class="au" src="img/au.png" />
              <div class="figma"><div class="rectangle"></div></div>
              <img class="figma" src="img/figma.png" />
              <div class="vue"><div class="rectangle"></div></div>
              <img class="vue" src="img/vue.png" />
              <div class="python"><div class="rectangle"></div></div>
              <img class="python" src="img/python.png" />
              <div class="laravel"><div class="rectangle"></div></div>
              <img class="laravel" src="img/laravel.png" />
              <div class="framer"><div class="rectangle"></div></div>
              <img class="framer" src="img/framer.png" />
            </div>
            <div class="teks-tengah-slide">
              <div class="overlap-group-2">
                <div class="text-wrapper-5">MAKE IT REAL</div>
                <div class="text-wrapper-6">MAKE IT REAL</div>
              </div>
            </div>
            <model-viewer
                  id="interactive-model"
                  src="bmw_m4_adro_bodykit.glb"
                  alt="Model 3D Karldjzy"
                  camera-controls
                  shadow-intensity="1"
                  interaction-prompt="none">
            </model-viewer>
            <div class="tagline">
              <img class="line" src="img/line-31.svg" />
              <div class="text-wrapper-7">ADYATMA oFFER’S</div>
            </div>
            <img class="border-navbar" src="img/border navbar.svg" />
            <img class="img" src="img/border navbar.png" />
            <div class="pembatas-hapus">
              <img class="line-2" src="img/line-32.svg" />
              <img class="line-3" src="img/line-33.svg" />
            </div>
            <img class="overlay-kanan" src="img/overlay kanan.svg" />
            <div class="quick-chat">Quick<br />Chat</div>
            <img class="logo" src="img/logo.png" />
            <div class="text-wrapper-8">WHAT I DO</div>
            <img class="line-4" src="img/line-34.svg" />
            <p class="p">
              WE craft refined digital experiences through seamless web
              development and emotionally resonant audio composition.
            </p>
          </div>
          <div class="BUTTON-TENGAH">
            <div class="overlap-2">
              <a href="https://karldjzy.netlify.app/" target="_blank" class="button-link">
                <div class="k-IRI">
                  <div class="overlap-group-3">
                    <img class="vector" src="img/vector 17.svg" />
                    <img class="vector-2" src="img/vector 18.svg" />
                    <div class="text-wrapper-9">WEB</div>
                  </div>
                </div>
              </a>
              <a href="https://www.youtube.com/@KarlDJzy" target="_blank" class="button-link">
                <div class="k-ANAN">
                  <div class="div-wrapper">
                    <img class="vector-5" src="img/vector 19.svg" />
                    <div class="text-wrapper-10">AUDIO</div>
                  </div>
                </div>
              </a>
            </div>
          </div>
          <div class="quotes">
            <p class="text-wrapper-11">
              With precision and creativity, sound becomes a powerful medium
              that shapes emotion, elevates messages.
            </p>
            <p class="a-well-crafted">
              A well-crafted website is more than a digital presence — it&#39;s
              a strategic expression of identity and purpose.
            </p>
            <div class="text-wrapper-12">WEB</div>
            <div class="text-wrapper-13">AUDIO</div>
          </div>
        </div>
        <div class="text-wrapper-14">ABOUT ME</div>
        <div class="overlap-3">
          <div class="quotes-2">
            <div class="overlap-4">
              <p class="EYES">
                <span class="text-wrapper-4">&nbsp;</span>
                <span class="text-wrapper-15">EYES</span>
                <span class="text-wrapper-4">&nbsp;</span>
              </p>
              <div class="text-wrapper-16">REAL</div>
              <div class="text-wrapper-17">REALISE</div>
            </div>
            <div class="overlap-5">
              <div class="text-wrapper-18">LIES</div>
              <div class="text-wrapper-19">REAL</div>
            </div>
          </div>
          <div class="quotes-kiri">
            <div class="overlap-6">
              <div class="overlap-7">
                <p class="text-wrapper-20">
                  Excellence takes many forms; each person carries their own
                  mastery, valuable in ways the world often overlooks.
                </p>
                <img class="line-5" src="img/line-35.svg" />
              </div>
              <p class="karldjzy-s-FAMILY">
                <span class="text-wrapper-21">Karl</span>
                <span class="text-wrapper-4">DJzy’S</span>
                <span class="text-wrapper-23">FAMILY</span>
              </p>
            </div>
          </div>
          <img class="star" src="img/star-1.svg" />
          <p class="NOT-ONE-BUT-IM-THE">
            <span class="text-wrapper-24">NOT ONE BUT IM THE </span>
            <span class="text-wrapper-25">ONE</span>
          </p>
        </div>
      </div>
    </div>
    <div id="chat-overlay">
      <div id="close-chat">&times;</div>
      <div class="chat-container">
        <div class="chat-messages">
          <div class="faq-container">
            <div class="faq-item">
              <button class="faq-question">
                <span>What is the meaning of this?</span>
                <span class="faq-icon"></span>
              </button>
              <div class="faq-answer">
                <p>This is my personal portfolio, a digital space where I showcase my skills in web development and audio composition. It's a testament to my passion for creating refined and emotionally resonant digital experiences.</p>
              </div>
            </div>
    
            <div class="faq-item">
              <button class="faq-question">
                <span>What can we do?</span>
                <span class="faq-icon"></span>
              </button>
              <div class="faq-answer">
                <p>I specialize in two main areas:<br>
                   1. <strong>Web Development:</strong> Crafting strategic, seamless websites using modern technologies you can see at the bottom of the main page.<br>
                   2. <strong>Audio Composition:</strong> Creating emotionally resonant soundscapes and music that elevate a message or story.</p>
              </div>
            </div>
    
            <div class="faq-item">
              <button class="faq-question">
                <span>How can I contact you personally?</span>
                <span class="faq-icon"></span>
              </button>
              <div class="faq-answer">
                <p>The best way to reach me for professional inquiries is through email. Click the button below to send me a message directly.But you can personly on Instagram</p>
                <a href="mailto:karldjzyofficial07@gmail.com" class="contact-button">Contact</a>
              </div>
            </div>
          </div>
          <div class="chat-divider"></div>
          <div class="chat-message bot">
            <p>Hello! How can I help you today? Feel free to ask anything about my services, projects, or skills.</p>
          </div>
        </div>
        <div class="chat-input-area">
          <input type="text" id="chat-input" placeholder="Type your message here..." />
          <button id="send-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // ==================================================
        // BAGIAN UNTUK FUNGSI HALAMAN UTAMA
        // ==================================================
        document.body.style.zoom = "90%";

        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        window.onbeforeunload = function () {
            window.scrollTo(0, 0);
        }

        // Scroll-lock di awal
        document.body.classList.add('scroll-locked');
        setTimeout(() => {
            document.body.classList.remove('scroll-locked');
        }, 4500);

        // Animasi untuk model viewer
        const modelViewer = document.querySelector('#interactive-model');
        if (modelViewer) {
            const rotationSpeed = 0.1;
            const initialPhi = 75;
            const initialRadius = 2.5;
            window.addEventListener('scroll', () => {
                const newTheta = window.scrollY * rotationSpeed;
                modelViewer.cameraOrbit = `${newTheta}deg ${initialPhi}deg ${initialRadius}m`;
            });
        }

        // Navigasi Link (Home, Rent, About)
        const homeLink = document.querySelector('#home-link');
        const rentLink = document.querySelector('#rent-link');
        const aboutLink = document.querySelector('#about-link');
        const topAnchor = document.querySelector('.portofolio .teks-tengah-slide');
        const bottomAnchor = document.querySelector('.portofolio img.figma');

        if (homeLink) {
            homeLink.addEventListener('click', (e) => { e.preventDefault(); window.scrollTo({ top: 0, behavior: 'smooth' }); });
        }
        if (aboutLink) {
            aboutLink.addEventListener('click', (e) => { e.preventDefault(); window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); });
        }
        if (rentLink && topAnchor && bottomAnchor) {
            rentLink.addEventListener('click', (event) => {
                event.preventDefault();
                const topAnchorPosition = topAnchor.getBoundingClientRect().top + window.scrollY;
                const bottomAnchorPosition = bottomAnchor.getBoundingClientRect().bottom + window.scrollY;
                const midpoint = topAnchorPosition + (bottomAnchorPosition - topAnchorPosition) / 2;
                const targetScrollY = midpoint - (window.innerHeight / 2);
                window.scrollTo({ top: targetScrollY, behavior: 'smooth' });
            });
        }
        
        // (Anda bisa menambahkan kode Intersection Observer di sini jika diperlukan)


        // ==================================================
        // BAGIAN UNTUK QUICK CHAT & BOT AI
        // ==================================================

        // --- Seleksi Elemen untuk Chat ---
        const quickChatTrigger = document.querySelector('.portofolio .quick-chat');
        const chatOverlay = document.getElementById('chat-overlay');
        const closeChatButton = document.getElementById('close-chat');
        const overlayKanan = document.querySelector('.portofolio .overlay-kanan');
        const body = document.body;
        const faqItems = document.querySelectorAll('.faq-item');
        const chatMessages = document.querySelector('.chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendButton = document.getElementById('send-button');

        // --- Fungsi untuk membuka/menutup chat ---
        if (quickChatTrigger && chatOverlay && closeChatButton && overlayKanan) {
            const openChat = () => {
                body.classList.add('scroll-locked');
                overlayKanan.classList.add('shifted');
                quickChatTrigger.classList.add('shifted');
                chatOverlay.classList.add('visible');
            };

            const closeChat = () => {
                body.classList.remove('scroll-locked');
                overlayKanan.classList.remove('shifted');
                quickChatTrigger.classList.remove('shifted');
                chatOverlay.classList.remove('visible');
            };

            quickChatTrigger.addEventListener('click', (e) => { e.preventDefault(); openChat(); });
            closeChatButton.addEventListener('click', closeChat);
        }

        // --- Fungsi untuk FAQ Accordion ---
        faqItems.forEach(item => {
            const questionButton = item.querySelector('.faq-question');
            questionButton.addEventListener('click', () => {
                const wasActive = item.classList.contains('active');
                faqItems.forEach(i => i.classList.remove('active'));
                if (!wasActive) { item.classList.add('active'); }
            });
        });
        
        // --- Fungsi untuk Bot AI ---
        function addMessageToChat(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('chat-message', sender);
            messageElement.innerHTML = `<p>${message}</p>`;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        async function handleUserMessage() {
            const userInput = chatInput.value.trim();
            if (userInput === "") return;

            addMessageToChat(userInput, 'user');
            chatInput.value = "";
            
            addMessageToChat("<em>Bot is thinking...</em>", 'bot-thinking');

            try {
                const response = await fetch('/.netlify/functions/ask-gemini', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ question: userInput }),
                });

                if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); }

                const data = await response.json();
                
                document.querySelector('.bot-thinking').remove();
                addMessageToChat(data.reply, 'bot');

            } catch (error) {
                console.error("Error:", error);
                if(document.querySelector('.bot-thinking')) {
                  document.querySelector('.bot-thinking').remove();
                }
                addMessageToChat("Sorry, something went wrong. Please try again later.", 'bot');
            }
        }
        
        // === INI BAGIAN PENTING YANG HILANG ===
        // Menghubungkan tombol kirim dan Enter ke fungsi handleUserMessage
        sendButton.addEventListener('click', handleUserMessage);
        chatInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                handleUserMessage();
            }
        });

      });
    </script>
  </body>
</html>
  </body>
</html>
